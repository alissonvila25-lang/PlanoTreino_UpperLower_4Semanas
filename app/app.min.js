// Minimal app copy for app/ subtree
(function(){
  const CSV='./plano-4-semanas.csv';
  fetch(CSV).then(r=>r.text()).then(t=>{ const data = Papa.parse(t,{header:true,skipEmptyLines:true}).data; const root=document.getElementById('exercise-list'); if(!root) return; root.innerHTML=''; data.forEach(r=>{ const d=document.createElement('div'); d.className='card'; d.textContent=(r.Dia||'')+': '+(r.Exercicio||''); root.appendChild(d); }); }).catch(()=>{});
})();
// Minimal app v1: carrega CSVs e renderiza lista simples
(async function(){
  function sanitize(s){ return s==null? '': String(s); }
  function decode(ab){ try { return new TextDecoder('utf-8').decode(ab); } catch(e){ return new TextDecoder('windows-1252').decode(ab); } }
  async function fetchBuf(p){ const r = await fetch(p); if(!r.ok) throw new Error('fetch fail '+p); return r.arrayBuffer(); }
  try {
    const planBuf = await fetchBuf('./plano-4-semanas.csv');
    const techBuf = await fetchBuf('./tecnicas.csv');
    const ptext = decode(planBuf); const ttext = decode(techBuf);
    const plan = Papa.parse(ptext, { header: true, skipEmptyLines: true }).data;
    const tech = Papa.parse(ttext, { header: true, skipEmptyLines: true }).data;
    const root = document.getElementById('exercise-list');
    if(!root) return;
    root.innerHTML = '';
    const weekSel = document.getElementById('week-select');
    const daySel = document.getElementById('day-select');
    function render(){
      const week = Number(weekSel.value||1);
      const day = daySel.value || 'Segunda';
      const list = plan.filter(r => sanitize(r.Dia) === day);
      if(!list.length) { root.innerHTML = '<div class="card">Nenhum exercício para o dia.</div>'; return; }
      root.innerHTML = list.map(r => `<div class="card"><strong>${sanitize(r.Exercicio)}</strong><div class="meta">${sanitize(r.Protocolo)} • Pausa: ${sanitize(r.Pausa)}</div></div>`).join('');
    }
    weekSel.addEventListener('change', render);
    daySel.addEventListener('change', render);
    render();
  } catch(e){ console.error(e); const root = document.getElementById('exercise-list'); if(root) root.innerHTML = '<div class="card">Erro ao carregar dados.</div>'; }
})();
